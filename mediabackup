#!/bin/bash
#script #4

MEDIA_DIR=/media/$USER/
BACKUP_DIR=$HOME/mediabackup/
MEDIA_NAME=$1
LOG_FILE=log.txt

if [ ! -d $BACKUP_DIR$MEDIA_NAME ] ; then
    NEW_BACKUP=1
    mkdir -p $BACKUP_DIR$MEDIA_NAME
else
    NEW_BACKUP=0
fi

#what if media_name already has a /?
rsync -auz --progress --delete $MEDIA_DIR$MEDIA_NAME/ $BACKUP_DIR$MEDIA_NAME

if [ $NEW_BACKUP -eq 1 ] ; then
    echo $(date): Created new backup of $MEDIA_NAME >> $BACKUP_DIR$LOG_FILE
elif [ $NEW_BACKUP -eq 0 ] ; then
    echo $(date): Updated existing backup of $MEDIA_NAME >> $BACKUP_DIR$LOG_FILE
fi
